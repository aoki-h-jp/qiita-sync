当たり前といえば当たり前かもしれないですが、設計時点で気が付かなかったのでメモ。

非同期実行の例としてS3, API Gatewayを想定しています。青い矢印は正常に疎通が取れます。

![非同期処理で立ち上げたlambdaのDLQはFIFOキューに入れられない](%E9%9D%9E%E5%90%8C%E6%9C%9F%E5%87%A6%E7%90%86%E3%81%A7%E7%AB%8B%E3%81%A1%E4%B8%8A%E3%81%92%E3%81%9Flambda%E3%81%AEDLQ%E3%81%AFFIFO%E3%82%AD%E3%83%A5%E3%83%BC%E3%81%AB%E5%85%A5%E3%82%8C%E3%82%89%E3%82%8C%E3%81%AA%E3%81%84.png)

# なぜこうなるのか
非同期実行でLambdaへ処理が流れてきたときに、Lambda内で並列的に同時実行されるためだと思います。

要するに、流れてきたときには処理A, 処理B, 処理C, ...という順序で流れてきたものが、再試行後の失敗時にはその順序が(例えば) 処理C, 処理A, 処理B, ...と変わってしまっている可能性が高いためです。

そのためFIFOキューの特徴である順序を保つということが保証できなくなり、仕様上送信できないのではないかと思われます。

**※ですが、console上ではFIFOキューをDLQとして設定できてしまうので要注意**
